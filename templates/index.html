<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Centro Automotivo de Recuperação de Peça Nacional e Importada - Cadastro de O.S.</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container p-2 p-md-4" style="background: url('/static/logo.jpg') no-repeat center center fixed; background-size: cover;">
  <header class="mb-4">
    <h1 class="text-center text-primary">Centro Automotivo de Recuperação de Peça Nacional e Importada</h1>
  </header>

  <div style="background-color: rgba(255, 255, 255, 0.8); border-radius: 12px; padding: 16px;">
    <div class="card mb-4" style="background-color: rgba(255, 255, 255, 0.85); border-radius: 8px;">
      <div class="card-header bg-primary text-white">Novo Cadastro</div>
      <div class="card-body">
        <form action="/nova_os" method="post">
          <h5>Dados do Veículo</h5>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label>Placa:</label>
              <input type="text" name="placa" class="form-control" required>
            </div>
            <div class="col-md-4 mb-3">
              <label>Marca:</label>
              <select name="marca" id="marca" class="form-control" required onchange="updateModelos()">
                <option value="">Selecione a marca</option>
                <option value="Ford">Ford</option>
                <option value="Chevrolet">Chevrolet</option>
                <option value="Fiat">Fiat</option>
                <option value="Volkswagen">Volkswagen</option>
                <option value="Toyota">Toyota</option>
                <option value="Hyundai">Hyundai</option>
                <option value="Honda">Honda</option>
                <option value="Mercedes-Benz">Mercedes-Benz</option>
                <option value="Scania">Scania</option>
                <option value="Volvo">Volvo</option>
                <option value="Iveco">Iveco</option>
                <option value="MAN">MAN</option>
                <option value="Renault">Renault</option>
                <option value="Peugeot">Peugeot</option>
                <option value="Citroën">Citroën</option>
                <option value="Kia">Kia</option>
                <option value="JAC Motors">JAC Motors</option>
              </select>
            </div>
            <div class="col-md-4 mb-3">
              <label>Modelo:</label>
              <input list="modelos" name="modelo" id="modelo" class="form-control" required>
              <datalist id="modelos"></datalist>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label>Ano/Fab/Mod:</label>
              <input type="text" name="ano" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
              <label>Combustível:</label>
              <select name="combustivel" class="form-control">
                <option value="">Selecione</option>
                <option value="Gasolina">Gasolina</option>
                <option value="Etanol">Etanol</option>
                <option value="Diesel">Diesel</option>
                <option value="Flex">Flex</option>
              </select>
            </div>
          </div>
          <!-- Campos adicionais inspirados nas telas compartilhadas -->
          <div class="row">
            <div class="col-md-4 mb-3">
              <label>Chassi:</label>
              <input type="text" name="chassi" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
              <label>Nº Motor:</label>
              <input type="text" name="nro_motor" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
              <label>Renavam:</label>
              <input type="text" name="renavam" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label>Cor:</label>
              <input type="text" name="cor" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
              <label>KM:</label>
              <input type="number" name="km" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
              <label>Portas:</label>
              <input type="number" name="portas" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 mb-3">
              <label>Comentário:</label>
              <textarea name="comentario" class="form-control" rows="2"></textarea>
            </div>
          </div>

          <h5>Dados do Cliente</h5>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label>Cliente/Razão Social:</label>
              <input type="text" name="cliente" class="form-control" required>
            </div>
            <div class="col-md-6 mb-3">
              <label>CPF/CNPJ:</label>
              <input type="text" name="cpf_cnpj" class="form-control">
            </div>
          </div>

          <h5>Serviço</h5>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label>Serviço:</label>
              <input list="servicos" name="servico" class="form-control" required>
              <datalist id="servicos">
                <option value="Troca de óleo e filtro">
                <option value="Troca de fluidos (arrefecimento, transmissão, freio)">
                <option value="Substituição de velas de ignição e cabos">
                <option value="Inspeção de correias e tensionadores">
                <option value="Revisão de sistemas elétricos e eletrônicos">
                <option value="Reparação de motor e transmissão">
                <option value="Substituição de componentes defeituosos">
                <option value="Reparação de sistemas de suspensão e direção">
                <option value="Substituição de embreagem">
                <option value="Reparação de sistemas de freio">
                <option value="Diagnóstico e reparação de problemas elétricos">
                <option value="Instalação e reparação de sistemas de iluminação">
                <option value="Instalação de sistemas de som e multimídia">
                <option value="Manutenção e recarga de sistemas de ar-condicionado">
                <option value="Reparação de sistemas de arrefecimento">
                <option value="Alinhamento de rodas">
                <option value="Balanceamento de pneus e rodas">
                <option value="Uso de scanners automotivos para identificar problemas">
                <option value="Leitura e redefinição de códigos de erro (check engine)">
                <option value="Inspeção veicular">
                <option value="Emissão de certificados de inspeção">
                <option value="Instalação de kits de elevação/rebaixamento">
                <option value="Personalização de rodas e pneus">
                <option value="Instalação de acessórios">
                <option value="Reparação de amassados e arranhões">
                <option value="Soldagem de partes estruturais">
                <option value="Troca de pastilhas e discos de freio">
                <option value="Sangria do sistema de freio">
                <option value="Substituição de amortecedores e molas">
              </datalist>
            </div>
            <div class="col-md-6 mb-3">
              <label>Valor:</label>
              <input type="number" step="0.01" name="valor" class="form-control" required>
            </div>
          </div>

          <div class="text-end">
            <button type="submit" class="btn btn-success">Salvar OS</button>
          </div>
        </form>
      </div>
    </div>

    <form method="get" action="/" class="mb-3 row g-2">
      <div class="col-md-3">
        <input type="text" name="id" class="form-control" placeholder="Filtrar por ID">
      </div>
      <div class="col-md-3">
        <input type="text" name="modelo" class="form-control" placeholder="Filtrar por Modelo">
      </div>
      <div class="col-md-3">
        <input type="text" name="servico" class="form-control" placeholder="Filtrar por Serviço">
      </div>
      <div class="col-md-3">
        <button type="submit" class="btn btn-primary w-100">Filtrar</button>
      </div>
    </form>

    <div class="card" style="background-color: rgba(255, 255, 255, 0.85); border-radius: 8px;">
      <div class="card-header bg-secondary text-white">Ordens cadastradas</div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-sm table-hover table-bordered mb-0">
            <thead class="table-dark text-center">
              <tr>
                <th>ID</th>
                <th>Placa</th>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Ano/Fab/Mod</th>
                <th>Combustível</th>
                <th>Cliente/Razão Social</th>
                <th>CPF/CNPJ</th>
                <th>Serviço</th>
                <th>Valor</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for ordem in ordens %}
                <tr>
                  <td>{{ ordem[0] }}</td>
                  <td>{{ ordem[1] }}</td>
                  <td>{{ ordem[2] }}</td>
                  <td>{{ ordem[3] }}</td>
                  <td>{{ ordem[4] }}</td>
                  <td>{{ ordem[5] }}</td>
                  <td>{{ ordem[6] }}</td>
                  <td>{{ ordem[7] }}</td>
                  <td>{{ ordem[8] }}</td>
                  <td>R${{ ordem[9] }}</td>
                  <td class="text-center">
                    <a href="/editar_os/{{ ordem[0] }}" class="btn btn-sm btn-outline-warning">Editar</a>
                    <a href="/excluir_os/{{ ordem[0] }}" class="btn btn-sm btn-outline-danger">Excluir</a>
                    <a href="/imprimir_os/{{ ordem[0] }}" class="btn btn-sm btn-outline-primary">Imprimir</a>
                  </td>
                </tr>
              {% else %}
                <tr>
                  <td colspan="11" class="text-center">Nenhuma ordem cadastrada ainda.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

</div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const modelosPorMarca = {
    "Ford": ["Ka", "F-250", "Cargo"],
    "Chevrolet": ["Onix", "S10", "D20"],
    "Fiat": ["Uno", "Strada"],
    "Volkswagen": ["Gol", "Delivery", "Constellation"],
    "Toyota": ["Corolla", "Hilux"],
    "Hyundai": ["HB20"],
    "Honda": ["Civic"],
    "Mercedes-Benz": ["Actros", "Atego", "Accelo"],
    "Scania": ["R450", "P310"],
    "Volvo": ["FH", "FMX"],
    "Iveco": ["Daily", "Tector"],
    "MAN": ["TGX", "TGS"],
    "Renault": ["Duster", "Master"],
    "Peugeot": ["Partner", "Boxer"],
    "Citroën": ["Jumper", "Jumpy"],
    "Kia": ["Bongo"],
    "JAC Motors": ["V260", "T40"]
  };

  function updateModelos() {
    const marca = document.getElementById('marca').value;
    const modeloDataList = document.getElementById('modelos');
    modeloDataList.innerHTML = '';
    if (modelosPorMarca[marca]) {
      modelosPorMarca[marca].forEach(function(modelo) {
        const option = document.createElement('option');
        option.value = modelo;
        modeloDataList.appendChild(option);
      });
    }
  }
</script>
</body>
</html>